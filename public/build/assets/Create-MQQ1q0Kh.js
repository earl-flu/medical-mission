import{k as f,l as E,T,f as p,a,u as s,w as g,F as b,o as _,Z as q,b as e,i as v,d as y,t as m,e as A,q as h,v as D,s as M,g as N,I as P,n as B}from"./app-CmUxgkoC.js";import{_ as O}from"./AuthenticatedLayout-7q1i4CHE.js";import{_ as n}from"./InputError-FzRQe0fW.js";import{_ as c}from"./TextInput-8Iu5yxWU.js";import{_ as i}from"./InputLabel-PecfvI-M.js";import{_ as R}from"./Checkbox-xtvmmrbo.js";import{u as F}from"./useToast-2YhJonq7.js";import{u as j}from"./useAgeCalculator-7mJTTUHL.js";import{s as I}from"./vue-multiselect-a06Iex1l.js";import"./_plugin-vue_export-helper-x3n3nnut.js";const H=e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Create Encounter ",-1),L={class:"text-xs text-gray-500 mt-2"},Y=e("span",{class:"text-indigo-500"},"Patients",-1),Z={class:"uppercase text-indigo-500"},G=e("span",null,"Add Encounter",-1),J={class:"max-w-5xl mx-auto py-12 flex justify-center gap-5"},K={class:"max-w-2xl flex-1"},Q={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},W={class:"p-5 border flex gap-5"},X=e("div",{class:"h-28 w-28 bg-gray-300"},null,-1),ee={class:"text-gray-600"},te={class:"uppercase text-cyan-800 font-medium"},se={class:"p-6 text-gray-900 dark:text-gray-100"},ae=e("p",{class:"font-bold text-xl mt-5"},"Event",-1),re={class:"grid md:gap-6 mt-4"},oe={class:"relative z-0 w-full group"},le=["value"],ne={class:"md:gap-6 mt-4"},ie={class:"relative z-0 w-full mb-6 group"},de=e("p",{class:"font-bold text-xl mt-10"},"Vital Signs",-1),ue={class:"grid md:grid-cols-3 md:gap-6 mt-4"},me={key:0,class:"relative z-0 w-full mb-6 group"},ce={class:"flex items-center"},pe=e("span",{class:"ms-2 text-sm text-gray-600 dark:text-gray-400"},"Pregnant",-1),ge={class:"grid md:grid-cols-3 md:gap-6"},_e={class:"relative z-0 w-full mb-6 group"},fe={class:"relative z-0 w-full mb-6 group"},be={class:"relative z-0 w-full mb-6 group"},ve={class:"grid md:grid-cols-3 md:gap-6"},ye={class:"relative z-0 w-full mb-6 group"},he={class:"relative z-0 w-full mb-6 group"},xe={class:"relative z-0 w-full mb-6 group"},ke=e("p",{class:"font-bold text-xl mt-2"},"Service",-1),we={class:"grid md:gap-6 mt-4"},Ve={class:"relative w-full mb-6 group"},Se={class:"grid md:gap-6"},$e={class:"relative w-full mb-6 group"},Ue=["disabled"],Be={__name:"Create",props:{patient:{type:Object,required:!0},services:{type:Array,required:!0},events:{type:Array,required:!0},diagnoses:{type:Array,required:!0}},setup(d){const{showToast:x}=F(),{calculateAge:k}=j(),u=d;f("");const w=k(),V=f([]);E(()=>{V.value=u.services.map(l=>({value:l.id,label:l.name}))});const S=()=>{const l=new Date;console.log("Current date and time:",l.toISOString());const o=l.getFullYear(),r=String(l.getMonth()+1).padStart(2,"0"),U=String(l.getDate()).padStart(2,"0"),z=String(l.getHours()).padStart(2,"0"),C=String(l.getMinutes()).padStart(2,"0");return`${o}-${r}-${U}T${z}:${C}`},t=T({is_opto:!1,is_pregnant:!1,bp_systolic:"",bp_diastolic:"",temperature:"",respiratory_rate:"",oxygen_saturation:"",pulse_rate:"",remarks:"",age:w,event_id:u.events.length>0?u.events[0].id:void 0,patient_id:u.patient.id,patient_birthdate:u.patient.birthdate,encounter_date:S(),services:[]});function $(){t.services=t.services.map(l=>l.id),t.post(route("encounter.store"),{onSuccess:()=>{x(`${u.patient.first_name} encounter has been registered!`),t.reset()}})}return(l,o)=>(_(),p(b,null,[a(s(q),{title:"Create Patient"}),a(O,null,{header:g(()=>[H,e("p",L,[a(s(v),{href:l.route("patients.index")},{default:g(()=>[Y]),_:1},8,["href"]),y(" > "),a(s(v),{href:l.route("patients.show",l.$props.patient)},{default:g(()=>[e("span",Z,m(l.$props.patient.full_name),1)]),_:1},8,["href"]),y(" > "),G])]),default:g(()=>[e("div",J,[e("div",K,[e("div",Q,[e("div",W,[X,e("div",ee,[e("p",te,m(d.patient.full_name),1),e("p",null,m(d.patient.sex_str),1),e("p",null,m(d.patient.birthdate_str),1),e("p",null,m(d.patient.age_years),1),e("p",null,m(d.patient.full_address),1)])]),e("div",se,[e("form",{onSubmit:o[11]||(o[11]=A(r=>$(),["prevent"]))},[ae,e("div",re,[e("div",oe,[a(i,{for:"event_id",value:"Event Name*"}),h(e("select",{name:"event",id:"event","onUpdate:modelValue":o[0]||(o[0]=r=>s(t).event_id=r),required:"",class:"w-full border-gray-300 mt-1 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},[(_(!0),p(b,null,M(u.events,r=>(_(),p("option",{key:r.id,value:r.id},m(r.name),9,le))),128))],512),[[D,s(t).event_id]]),a(n,{class:"mt-2",message:s(t).errors.event_id},null,8,["message"])])]),e("div",ne,[e("div",ie,[a(i,{for:"encounter_date",value:"Encounter Date*"}),a(c,{name:"encounter_date",id:"encounter_date",step:"0.1",class:"mt-1 block w-full",placeholder:" ",modelValue:s(t).encounter_date,"onUpdate:modelValue":o[1]||(o[1]=r=>s(t).encounter_date=r),autofocus:"",autocomplete:"encounter_date",type:"datetime-local"},null,8,["modelValue"]),a(n,{class:"mt-2",message:s(t).errors.encounter_date},null,8,["message"])])]),de,e("div",ue,[s(t).sex=="0"?(_(),p("div",me,[e("label",ce,[a(R,{name:"remember",checked:s(t).is_pregnant,"onUpdate:checked":o[2]||(o[2]=r=>s(t).is_pregnant=r)},null,8,["checked"]),pe])])):N("",!0)]),e("div",ge,[e("div",_e,[a(i,{for:"temperature",value:"Temperature (deg)"}),a(c,{name:"temperature",id:"temperature",type:"number",step:"0.1",class:"mt-1 block w-full",placeholder:" ",modelValue:s(t).temperature,"onUpdate:modelValue":o[3]||(o[3]=r=>s(t).temperature=r),autofocus:"",autocomplete:"temperature"},null,8,["modelValue"]),a(n,{class:"mt-2",message:s(t).errors.temperature},null,8,["message"])]),e("div",fe,[a(i,{for:"bp_systolic",value:"BP Systolic"}),a(c,{name:"bp_systolic",id:"bp_systolic",type:"number",class:"mt-1 block w-full",placeholder:"120",modelValue:s(t).bp_systolic,"onUpdate:modelValue":o[4]||(o[4]=r=>s(t).bp_systolic=r),autofocus:"",autocomplete:"bp_systolic"},null,8,["modelValue"]),a(n,{class:"mt-2",message:s(t).errors.temperature},null,8,["message"])]),e("div",be,[a(i,{for:"bp_diastolic",value:"BP Diastolic"}),a(c,{name:"bp_diastolic",id:"bp_diastolic",type:"number",class:"mt-1 block w-full",placeholder:"80",modelValue:s(t).bp_diastolic,"onUpdate:modelValue":o[5]||(o[5]=r=>s(t).bp_diastolic=r),autofocus:"",autocomplete:"bp_diastolic"},null,8,["modelValue"]),a(n,{class:"mt-2",message:s(t).errors.bp_diastolic},null,8,["message"])])]),e("div",ve,[e("div",ye,[a(i,{for:"respiratory_rate",value:"Respiratory Rate"}),a(c,{name:"respiratory_rate",id:"respiratory_rate",type:"number",class:"mt-1 block w-full",placeholder:" ",modelValue:s(t).respiratory_rate,"onUpdate:modelValue":o[6]||(o[6]=r=>s(t).respiratory_rate=r),autofocus:"",autocomplete:"respiratory_rate"},null,8,["modelValue"]),a(n,{class:"mt-2",message:s(t).errors.respiratory_rate},null,8,["message"])]),e("div",he,[a(i,{for:"oxygen_saturation",value:"Oxygen Saturation (%)"}),a(c,{name:"oxygen_saturation",id:"oxygen_saturation",type:"number",class:"mt-1 block w-full",placeholder:" ",modelValue:s(t).oxygen_saturation,"onUpdate:modelValue":o[7]||(o[7]=r=>s(t).oxygen_saturation=r),autofocus:"",autocomplete:"oxygen_saturation"},null,8,["modelValue"]),a(n,{class:"mt-2",message:s(t).errors.oxygen_saturation},null,8,["message"])]),e("div",xe,[a(i,{for:"pulse_rate",value:"Pulse Rate"}),a(c,{name:"pulse_rate",id:"pulse_rate",type:"number",class:"mt-1 block w-full",placeholder:" ",modelValue:s(t).pulse_rate,"onUpdate:modelValue":o[8]||(o[8]=r=>s(t).pulse_rate=r),autofocus:"",autocomplete:"pulse_rate"},null,8,["modelValue"]),a(n,{class:"mt-2",message:s(t).errors.pulse_rate},null,8,["message"])])]),ke,e("div",we,[e("div",Ve,[a(i,{for:"service_id",value:"Services"}),a(s(I),{modelValue:s(t).services,"onUpdate:modelValue":o[9]||(o[9]=r=>s(t).services=r),options:d.services,multiple:!0,"close-on-select":!1,placeholder:"Select Services",label:"name","track-by":"id","preselect-first":!1,class:"mt-1"},null,8,["modelValue","options"]),a(n,{class:"mt-2",message:s(t).errors.service_id},null,8,["message"])])]),e("div",Se,[e("div",$e,[a(i,{for:"remarks",value:"Remarks"}),h(e("textarea",{name:"remarks","onUpdate:modelValue":o[10]||(o[10]=r=>s(t).remarks=r),id:"remarks",rows:"4",class:"block mt-1 p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[P,s(t).remarks]]),a(n,{class:"mt-2",message:s(t).errors.remarks},null,8,["message"])])]),e("button",{type:"submit",class:B([{"opacity-25 cursor-not-allowed":s(t).processing},"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"]),disabled:s(t).processing}," Save Encounter ",10,Ue)],32)])])])])]),_:1})],64))}};export{Be as default};
