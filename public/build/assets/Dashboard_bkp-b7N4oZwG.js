import{H as L,I as B,J as O,K as U,k as D,l as V,L as $,m as E,M as q,N as z,O as A,T as H,f as K,a as x,u as m,w as I,F as W,o as G,Z as R,b as s,e as J,n as Q,t as F}from"./app-sd6Qcxhm.js";import{_ as Z}from"./AuthenticatedLayout-lFy5hi1G.js";import{_ as X}from"./TextInput-zTQ8n-Yp.js";import{C as k,B as Y,P as tt,p as et,a as at,A as st,b as ot,c as rt,d as nt,L as lt,e as it}from"./chartjs-plugin-datalabels.esm-t5qR945L.js";import"./_plugin-vue_export-helper-x3n3nnut.js";const M={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},dt={ariaLabel:{type:String},ariaDescribedby:{type:String}},ct={type:{type:String,required:!0},...M,...dt},ut=U[0]==="2"?(t,r)=>Object.assign(t,{attrs:r}):(t,r)=>Object.assign(t,r);function C(t){return A(t)?q(t):t}function pt(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return A(r)?new Proxy(t,{}):t}function gt(t,r){const n=t.options;n&&r&&Object.assign(n,r)}function N(t,r){t.labels=r}function j(t,r,n){const g=[];t.datasets=r.map(d=>{const i=t.datasets.find(f=>f[n]===d[n]);return!i||!d.data||g.includes(i)?{...d}:(g.push(i),Object.assign(i,d),i)})}function mt(t,r){const n={labels:[],datasets:[]};return N(n,t.labels),j(n,t.datasets,r),n}const ft=L({props:ct,setup(t,r){let{expose:n,slots:g}=r;const d=D(null),i=B(null);n({chart:i});const f=()=>{if(!d.value)return;const{type:c,data:u,options:_,plugins:b,datasetIdKey:w}=t,v=mt(u,w),o=pt(v,u);i.value=new k(d.value,{type:c,data:o,options:{..._},plugins:b})},h=()=>{const c=q(i.value);c&&(c.destroy(),i.value=null)},y=c=>{c.update(t.updateMode)};return V(f),$(h),E([()=>t.options,()=>t.data],(c,u)=>{let[_,b]=c,[w,v]=u;const o=q(i.value);if(!o)return;let e=!1;if(_){const a=C(_),l=C(w);a&&a!==l&&(gt(o,a),e=!0)}if(b){const a=C(b.labels),l=C(v.labels),p=C(b.datasets),P=C(v.datasets);a!==l&&(N(o.config.data,a),e=!0),p&&p!==P&&(j(o.config.data,p,t.datasetIdKey),e=!0)}e&&z(()=>{y(o)})},{deep:!0}),()=>O("canvas",{role:"img",ariaLabel:t.ariaLabel,ariaDescribedby:t.ariaDescribedby,ref:d},[O("p",{},[g.default?g.default():""])])}});function T(t,r){return k.register(r),L({props:M,setup(n,g){let{expose:d}=g;const i=B(null),f=h=>{i.value=h==null?void 0:h.chart};return d({chart:i}),()=>O(ft,ut({ref:f},{type:t,...n}))}})}const S=T("bar",Y),ht=T("pie",tt),bt=s("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Dashboard",-1),xt={class:"py-12"},yt={class:"w-full mx-auto sm:px-6 lg:px-8 mb-10"},_t={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},vt={class:"p-6 text-gray-900 dark:text-gray-100"},Ct={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},wt={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},Dt={class:"p-6 text-gray-900 dark:text-gray-100"},kt={class:"relative z-0 w-full mb-20 group flex gap-5"},Ft=["disabled"],Pt={class:"flex justify-around"},St={class:"min-h-24 min-w-48 shadow-md border border-indigo-50 rounded-lg p-5"},Ot=s("p",{class:"uppercase text-xs text-gray-600 font-bold text-gray-500"},"Total Patient",-1),qt={class:"text-5xl mt-2"},It={class:"min-h-24 min-w-48 shadow-md border border-indigo-50 rounded-lg p-5"},Lt=s("p",{class:"uppercase text-xs text-gray-600 font-bold text-gray-500"},"Pedia",-1),Bt={class:"text-5xl mt-2"},At={class:"min-h-24 min-w-48 shadow-md border border-indigo-50 rounded-lg p-5"},Mt=s("p",{class:"uppercase text-xs text-gray-600 font-bold text-gray-500"},"Senior Citizen",-1),Nt={class:"text-5xl mt-2"},jt={class:"min-h-24 min-w-48 shadow-md border border-indigo-50 rounded-lg p-5"},Tt=s("p",{class:"uppercase text-xs text-gray-600 font-bold text-gray-500"},"Pregnant",-1),Ut={class:"text-5xl mt-2"},Vt={class:"flex gap-10 mt-20"},$t={class:"flex-1 shadow p-4 flex items-center justify-center flex-col gap-4",style:{height:"400px"}},Et=s("div",{class:"flex-1 shadow p-4 flex items-center justify-center flex-col gap-4",style:{height:"400px"}},null,-1),zt={class:"shadow-md p-4 mt-10"},Jt={__name:"Dashboard_bkp",props:{genderCounts:{type:Array,required:!0},totalPatients:{type:[String,Number],required:!0},disposedItems:{type:Array,required:!0},totalDiagnoses:{type:Array,required:!0},totals:{type:Object},dateFilter:{type:String},stocks:{type:Array}},setup(t){k.register(et,at,st,ot,rt,nt,lt),k.register(it),k.defaults.set("plugins.datalabels",{color:"#fff"});const r=t,n=H({dateFilter:r.dateFilter}),g=()=>{n.get(route("dashboard",{dateFilter}),{preserveScroll:!0})},d=D(c(r.genderCounts)),i=D(b(r.disposedItems)),f=D(w(r.totalDiagnoses)),h=D(v(r.stocks));function y(o){return{responsive:!0,plugins:{title:{display:!0,text:o},datalabels:{color:"#cdcdcd",formatter:e=>e.toLocaleString("en-US")}}}}function c(o){const e=["Male","Female"],a=o.reduce((l,p)=>{const P=p.sex===1?0:1;return l[P]=p.total,l},[0,0]);return{labels:e,datasets:[{data:a,backgroundColor:["#1B065E","#f25cc0"]}]}}function u(o){const e=["#2196F3","#F44336","#FFC107","#4CAF50","#9C27B0"],a=o>e.length?u(o-e.length):[];return e.concat(a)}function _(o){return`hsl(${(300+o*50)%360}, 70%, 50%)`}function b(o){const e=o.sort((a,l)=>a.name.localeCompare(l.name));return{labels:o.map(a=>a.name),datasets:[{label:"Disposed Quantity",data:e.map(a=>parseInt(a.total_quantity)),backgroundColor:u(e.length),borderColor:u(e.length),borderWidth:1}]}}function w(o){const e=o.sort((a,l)=>a.diagnosisName.localeCompare(l.diagnosisName));return{labels:o.map(a=>a.diagnosisName),datasets:[{label:"Diagnosis Total",data:e.map(a=>parseInt(a.total)),backgroundColor:u(e.length),borderColor:u(e.length),borderWidth:1}]}}function v(o){const e=o.sort((l,p)=>p.quantity-l.quantity),a=e.map((l,p)=>_(p));return{labels:o.map(l=>l.name),datasets:[{label:"Current Stock",data:e.map(l=>parseInt(l.quantity)),backgroundColor:a,borderColor:a,borderWidth:1}]}}return(o,e)=>(G(),K(W,null,[x(m(R),{title:"Dashboard"}),x(Z,null,{header:I(()=>[bt]),default:I(()=>[s("div",xt,[s("div",yt,[s("div",_t,[s("div",vt,[x(m(S),{class:"mt-10",options:y("Inventory"),data:h.value},null,8,["options","data"])])])]),s("div",Ct,[s("div",wt,[s("div",Dt,[s("div",null,[s("form",{onSubmit:e[1]||(e[1]=J(a=>g(),["prevent"]))},[s("div",kt,[x(X,{name:"dateFilter",id:"dateFilter",type:"date",class:"mt-1 block w-54",placeholder:" ",modelValue:m(n).dateFilter,"onUpdate:modelValue":e[0]||(e[0]=a=>m(n).dateFilter=a),required:"",autocomplete:"dateFilter"},null,8,["modelValue"]),s("button",{type:"submit",class:Q([{"opacity-25 cursor-not-allowed":m(n).processing},"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto uppercase text-xs px-4 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"]),disabled:m(n).processing},"Filter",10,Ft)])],32)]),s("div",Pt,[s("div",St,[Ot,s("p",qt,F(t.totalPatients),1)]),s("div",It,[Lt,s("p",Bt,F(t.totals.totalPedia),1)]),s("div",At,[Mt,s("p",Nt,F(t.totals.totalSenior),1)]),s("div",jt,[Tt,s("p",Ut,F(t.totals.totalPregnant),1)])]),s("div",Vt,[s("div",$t,[x(m(ht),{options:y("Gender"),data:d.value},null,8,["options","data"])]),Et]),s("div",zt,[x(m(S),{options:y("Disposed Items"),data:i.value},null,8,["options","data"])]),x(m(S),{options:y("Diagnoses"),data:f.value,class:"mt-10"},null,8,["options","data"])])])])])]),_:1})],64))}};export{Jt as default};
